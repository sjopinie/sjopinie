<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{% block title %}{% endblock %}</title>
    {% load static %}
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'sjopinie_app/site.css' %}"
    />
  </head>
  <body>
    <nav>
      <ul id="navbar-list">
        <li class="navbar-list-el">
          <a class="navbar-list-el" href="/">Strona gÅ‚Ã³wna</a>
        </li>
        <li class="navbar-list-el">
          <a class="navbar-list-el" href="/list_subj">Lista PrzedmiotÃ³w</a>
        </li>
        {% if user.is_authenticated %}
        <li>
          <input
            id="navbar-search-text"
            class="navbar-list-search"
            type="text"
            placeholder="Szukaj"
          />
          <button id="navbar-search-button" class="navbar-list-search">
            ðŸ”Ž
          </button>
        </li>
        <li class="navbar-list-el">
          <a class="navbar-list-el" href="/api-auth/logout/"
            >Witaj {{user.get_username}}, (wyloguj)</a
          >
        </li>
        {% else %}
        <li class="navbar-list-el" class="navbar-list-el">
          <a class="navbar-list-el" href="/login">Zaloguj</a>
        </li>
        {% endif %}
      </ul>
    </nav>
    <div class="body-content">{% block content %} {% endblock %}</div>

    <div class="footer-content">
      <hr />
      <footer>
        <p>Copyright Â© 2021 sjopinie Team</p>
      </footer>
    </div>

    <!-- Load development version ov VUE TODO change to production one at the end -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

    {% if user.is_authenticated %}
    <script async>
      document
        .querySelector("#navbar-search-text")
        .addEventListener("keyup", function (event) {
          // Number 13 is the "Enter" key on the keyboard
          if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            document.getElementById("navbar-search-button").click();
          }
        });
      document.querySelector("#navbar-search-button").onclick = function () {
        let query = document.querySelector("#navbar-search-text").value;
        if (query) {
          location.href = "/search/" + query;
        }
      };
    </script>

    {% endif %} {% block load-scripts %} {% endblock %}
  </body>
</html>
